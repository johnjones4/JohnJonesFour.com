---
layout: post
title:  "Xcode to Android PDF Image Converter"
links: 
- src: "https://gist.github.com/johnjones4/1c73424aedf93dba0b75"
  name: "GutHub Gist"
description: "When working on a dual-platform app recently, I found myself confronted with the need to convert two sets of U.S. state images - preview and detail views - from Xcode-ready PDFs to Android PNGs. Instread of saving 100 PDFs to four different size formats, I wrote a script and released it as a Gist so that others might benefit from it."
---

<p><strong>Update 3/16/15:</strong> I made a small modification to use Inkscape to go from SVG to PNG as Imagemagick was cropping some images in strange ways.</p>

<p>When working on a dual-platform app recently, I found myself confronted with the need to convert two sets of U.S. state images - preview and detail views - from Xcode-ready PDFs to Android PNGs. Anyone who has worked on an Android app knows that there is no convenient way to save one vector version of an image for the IDE convert it to the proper sizes. So not wanting to have to save 100 PDFs as four versions of each file, I wrote a Bash script that uses <a href="https://bitbucket.org/petermr/pdf2svg/wiki/Home" target="_blank">PDF2SVG</a>, <a href="https://inkscape.org/en/doc/inkscape-man.html" target="_blank">Inkscape</a>, and <a href="http://www.imagemagick.org/script/identify.php" target="_blank">ImageMagick identify</a> to find and save all of the image files Android needs based on the Xcode PDFs. It converts each PDF to an SVG as an intermediate step because Imagemagick had trouble upscaling when going from PDF to PNG but worked fine with SVG to PNG.</p>

<p>To use the command, edit the paths and search pattern at the top of the script. Do not add trailing path separators as the commands do not expect them, which could cause unexpected behavior. The search pattern is what <code>find</code> uses to look for imageset folders potentially containing PDF files. You can edit this so that only certain files get converted. Please see the man page for <code>find</code> to see how to encode more complex patterns.</p>

<p>
  To install Inkscape's command line too, visit <a target="_blank" href="http://wiki.inkscape.org/wiki/index.php/MacOS_X">this page</a>. To install both PDF2SVG and ImageMagick, I used <a href="https://www.macports.org/" target="_blank">MacPorts</a> but I believe these tools are available via <a href="http://brew.sh/" target="_blank">Homebrew</a> as well. To install with MacPorts, I used the following commands:
</p>
<p>
  <code>sudo port install pdf2svg</code><br/>
  <code>sudo port install imagemagick</code>
</p>
<p>
  To run the command, save the Gist as <code>convert.sh</code>, make it executable by running <code>chmod +x convert.sh</code>, and then execute it using <code>./convert.sh</code>.
</p>
<p>
  <script src="https://gist.github.com/johnjones4/1c73424aedf93dba0b75.js"></script>
</p>